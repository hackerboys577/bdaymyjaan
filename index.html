<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Memories | Note & Birthday</title>
    
    <!-- GSAP via CDN -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollTrigger.min.js"></script>
    
    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;700&family=Montserrat:wght@300;400;600&family=Playfair+Display:ital,wght@0,400;0,700;1,400&display=swap" rel="stylesheet">

    <style>
        /* --- RESET & BASE --- */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Montserrat', sans-serif;
            background-color: #000;
            color: #fff;
            overflow-x: hidden;
            height: 100vh;
            width: 100vw;
        }

        /* --- VIDEO BACKGROUND --- */
        #bg-video-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            overflow: hidden;
        }

        #bg-video {
            min-width: 100%;
            min-height: 100%;
            width: auto;
            height: auto;
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            object-fit: cover;
            transition: opacity 1s ease;
        }

        .overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.4); /* Dark overlay for text readability */
            background: radial-gradient(circle, rgba(0,0,0,0.2) 0%, rgba(0,0,0,0.8) 100%);
            z-index: 0;
            pointer-events: none;
        }

        /* --- HOME SECTION --- */
        #home-section {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            z-index: 10;
        }

        .cards-container {
            display: flex;
            gap: 40px;
            padding: 20px;
        }

        .card {
            width: 300px;
            height: 450px;
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(15px);
            -webkit-backdrop-filter: blur(15px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 20px;
            display: flex;
            justify-content: center;
            align-items: center;
            cursor: pointer;
            position: relative;
            overflow: hidden;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
        }

        .card:hover {
            transform: translateY(-10px) scale(1.02);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.6), 0 0 20px rgba(255, 255, 255, 0.1);
            border-color: rgba(255, 255, 255, 0.5);
        }

        .card h2 {
            font-family: 'Cinzel', serif;
            font-size: 2rem;
            letter-spacing: 4px;
            z-index: 2;
            text-transform: uppercase;
            text-shadow: 0 2px 10px rgba(0,0,0,0.5);
        }

        .card-bg-glow {
            position: absolute;
            top: 50%;
            left: 50%;
            width: 150%;
            height: 150%;
            background: radial-gradient(circle, rgba(255,255,255,0.1) 0%, rgba(0,0,0,0) 70%);
            transform: translate(-50%, -50%);
            opacity: 0;
            transition: opacity 0.5s ease;
        }

        .card:hover .card-bg-glow {
            opacity: 1;
        }

        /* --- PROJECT SECTION --- */
        #project-section {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            min-height: 100vh;
            z-index: 20;
            display: none; /* Hidden by default */
            flex-direction: column;
            overflow-y: auto; /* Enable scrolling for gallery */
            scroll-behavior: smooth;
        }

        /* Custom Scrollbar */
        #project-section::-webkit-scrollbar {
            width: 8px;
        }
        #project-section::-webkit-scrollbar-track {
            background: rgba(0,0,0,0.5);
        }
        #project-section::-webkit-scrollbar-thumb {
            background: rgba(255,255,255,0.3);
            border-radius: 4px;
        }

        .nav-header {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            padding: 20px 40px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            z-index: 30;
            background: linear-gradient(to bottom, rgba(0,0,0,0.8), transparent);
        }

        .btn {
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.3);
            color: #fff;
            padding: 10px 20px;
            border-radius: 30px;
            cursor: pointer;
            font-family: 'Montserrat', sans-serif;
            font-size: 0.9rem;
            text-transform: uppercase;
            letter-spacing: 1px;
            transition: all 0.3s ease;
            backdrop-filter: blur(5px);
        }

        .btn:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: scale(1.05);
        }

        .controls {
            display: flex;
            gap: 15px;
        }

        /* --- CONTENT AREA (HERO OF PROJECT) --- */
        .project-hero {
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
            padding: 100px 20px 50px;
            position: relative;
        }

        /* Typewriter Container */
        #lyrics-container {
            font-family: 'Playfair Display', serif;
            font-size: 1.8rem;
            line-height: 2;
            max-width: 800px;
            min-height: 300px;
            text-shadow: 0 2px 10px rgba(0,0,0,0.8);
        }

        .lyric-line {
            display: block;
            margin-bottom: 15px;
            opacity: 0; /* Hidden initially for animation */
            transform: translateY(20px);
        }

        #birthday-msg {
            font-family: 'Cinzel', serif;
            font-size: 3.5rem;
            text-shadow: 0 0 20px rgba(255,215,0,0.5);
            display: none;
        }

        .sparkle {
            position: absolute;
            background: white;
            border-radius: 50%;
            pointer-events: none;
            animation: twinkle 1.5s infinite ease-in-out;
        }

        @keyframes twinkle {
            0%, 100% { opacity: 0; transform: scale(0.5); }
            50% { opacity: 1; transform: scale(1.2); }
        }

        .scroll-indicator {
            position: absolute;
            bottom: 30px;
            animation: bounce 2s infinite;
            opacity: 0.7;
            font-size: 0.8rem;
            letter-spacing: 2px;
            text-transform: uppercase;
        }

        @keyframes bounce {
            0%, 20%, 50%, 80%, 100% {transform: translateY(0);}
            40% {transform: translateY(-10px);}
            60% {transform: translateY(-5px);}
        }

        /* --- GALLERY SECTION --- */
        .gallery-section {
            padding: 50px 5%;
            background: linear-gradient(to bottom, transparent, rgba(0,0,0,0.9));
            min-height: 100vh;
        }

        .gallery-title {
            font-family: 'Cinzel', serif;
            font-size: 2rem;
            margin-bottom: 40px;
            text-align: center;
            border-bottom: 1px solid rgba(255,255,255,0.2);
            padding-bottom: 15px;
            display: inline-block;
            position: relative;
            left: 50%;
            transform: translateX(-50%);
        }

        .gallery-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
        }

        .gallery-item {
            position: relative;
            height: 300px;
            overflow: hidden;
            border-radius: 10px;
            cursor: pointer;
            box-shadow: 0 5px 15px rgba(0,0,0,0.5);
        }

        .gallery-item img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.5s ease;
        }

        .gallery-item:hover img {
            transform: scale(1.1);
        }

        .gallery-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.3);
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .gallery-item:hover .gallery-overlay {
            opacity: 1;
        }

        /* --- RESPONSIVE --- */
        @media (max-width: 768px) {
            .cards-container {
                flex-direction: column;
            }
            .card {
                width: 280px;
                height: 200px;
            }
            #lyrics-container {
                font-size: 1.2rem;
                padding: 0 20px;
            }
            #birthday-msg {
                font-size: 2rem;
            }
            .gallery-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>

    <!-- Background Video -->
    <div id="bg-video-container">
        <!-- Default video is generic cinematic nature -->
        <video id="bg-video" autoplay loop muted playsinline>
            <source src="" type="video/mp4">
        </video>
        <div class="overlay"></div>
    </div>

    <!-- Audio Element (Hidden) -->
    <audio id="bg-audio"></audio>

    <!-- Home View -->
    <section id="home-section">
        <div class="cards-container">
            <div class="card" onclick="openProject('note')">
                <div class="card-bg-glow"></div>
                <h2>Note</h2>
            </div>
            <div class="card" onclick="openProject('birthday')">
                <div class="card-bg-glow"></div>
                <h2>Birthday</h2>
            </div>
        </div>
    </section>

    <!-- Project View -->
    <section id="project-section">
        <!-- Navigation -->
        <div class="nav-header">
            <button class="btn" onclick="closeProject()">← Back</button>
            <div class="controls">
                <button class="btn" id="restart-lyrics-btn" style="display:none;" onclick="restartLyrics()">Replay Lyrics</button>
                <button class="btn" onclick="toggleAudio()" id="audio-btn">Pause Music</button>
            </div>
        </div>

        <!-- Hero Content -->
        <div class="project-hero">
            <!-- Lyrics Container (Note) -->
            <div id="lyrics-container"></div>
            
            <!-- Birthday Message (Birthday) -->
            <div id="birthday-msg">
                Happy Birthday Meri Jaan❤️ <br>
                <span style="font-size: 1.5rem; font-family: 'Montserrat';">Wishing you the most magical year ahead.</span>
            </div>

            <div class="scroll-indicator">Scroll Down</div>
        </div>

        <!-- Gallery -->
        <div class="gallery-section">
            <h3 class="gallery-title">Memories</h3>
            <div class="gallery-grid" id="gallery-grid">
                <!-- Images injected via JS -->
            </div>
        </div>
    </section>

    <script>
        // --- CONFIGURATION & ASSETS ---
        /* REPLACE THESE URLS WITH YOUR ACTUAL FILES.
           Video: MP4 direct link.
           Audio: MP3 direct link.
           Images: JPG/PNG direct links.
        */
        const assets = {
            note: {
                video: "mylivewallpapers-com-Couple-with-Sparklers-4K.mp4", // Cinematic Romantic Rain/Mood
                audio: "Sambhal Ke Rakha Wo Phool Mera Tu - Finding Her _ Kushagra _ Hindi.mp3", // Emotional Piano
                gallery: [
                    "jaan.jpg",
                    "2.jpg",
                    "https://images.unsplash.com/photo-1661248435571-4e0c6f1da21b?w=600&auto=format&fit=crop&q=60&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxzZWFyY2h8N3x8YmRheSUyMGdpcmx8ZW58MHx8MHx8fDA%3D"
                ]
            },
            birthday: {
                video: "mylivewallpapers-com-Couple-with-Sparklers-4K.mp4", // Cinematic Romantic Rain/Mood
                audio: "Sambhal Ke Rakha Wo Phool Mera Tu - Finding Her _ Kushagra _ Hindi.mp3", // Upbeat
                gallery: [
                   "jaan.jpg",
                    "2.jpg",
                    "https://images.unsplash.com/photo-1661248435571-4e0c6f1da21b?w=600&auto=format&fit=crop&q=60&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxzZWFyY2h8N3x8YmRheSUyMGdpcmx8ZW58MHx8MHx8fDA%3D"
                ]
            }
        };

        const lyrics = [
            "Sambhaal ke rakha wo phool mera tu",
            "Meri shayari mein zaroor raha tu",
            "Jo aankhon mein pyaari si duniya basaayi",
            "Wo duniya bhi tha tu, wo lamha bhi tha tu",
            "Haan, lagte hain mujhko ye kisse sataane",
            "Deta na dil mera tujhko bhulaane",
            "Adhoore se vaade, adhoori si raatein",
            "Ab hisse mein daakhil mere bas wo yaadein"
        ];

        // --- DOM ELEMENTS ---
        const homeSection = document.getElementById('home-section');
        const projectSection = document.getElementById('project-section');
        const bgVideo = document.getElementById('bg-video');
        const bgAudio = document.getElementById('bg-audio');
        const audioBtn = document.getElementById('audio-btn');
        const lyricsContainer = document.getElementById('lyrics-container');
        const birthdayMsg = document.getElementById('birthday-msg');
        const galleryGrid = document.getElementById('gallery-grid');
        const restartBtn = document.getElementById('restart-lyrics-btn');

        let currentMode = null;
        let isAudioPlaying = false;
        let typingTimeline = null;

        // --- INITIALIZATION ---
        // Set a default background video for Home
        bgVideo.src = "mylivewallpapers-com-Couple-with-Sparklers-4K.mp4"; // Abstract soothing
        
        // GSAP Intro Animation
        window.addEventListener('load', () => {
            gsap.from(".card", {
                duration: 1.5,
                y: 100,
                opacity: 0,
                stagger: 0.3,
                ease: "power3.out"
            });
        });

        // --- CORE FUNCTIONS ---

        function openProject(type) {
            currentMode = type;
            const data = assets[type];

            // 1. Transition Home Out
            gsap.to(".card", {
                duration: 0.5,
                scale: 0.8,
                opacity: 0,
                stagger: 0.1,
                ease: "power2.in",
                onComplete: () => {
                    homeSection.style.display = 'none';
                    projectSection.style.display = 'flex';
                    setupProject(type, data);
                }
            });
        }

        function setupProject(type, data) {
            // Swap Media
            bgVideo.style.opacity = 0;
            setTimeout(() => {
                bgVideo.src = data.video;
                bgVideo.play();
                gsap.to(bgVideo, { duration: 1, opacity: 1 });
            }, 500);

            bgAudio.src = data.audio;
            bgAudio.play().then(() => {
                isAudioPlaying = true;
                audioBtn.innerText = "Pause Music";
            }).catch(e => {
                console.log("Autoplay blocked, waiting for interaction");
                isAudioPlaying = false;
                audioBtn.innerText = "Play Music";
            });

            // Build Gallery
            galleryGrid.innerHTML = '';
            data.gallery.forEach((imgSrc, index) => {
                const div = document.createElement('div');
                div.className = 'gallery-item';
                div.innerHTML = `<img src="${imgSrc}" loading="lazy"><div class="gallery-overlay"></div>`;
                galleryGrid.appendChild(div);
            });

            // Setup Specific Content
            if (type === 'note') {
                birthdayMsg.style.display = 'none';
                lyricsContainer.style.display = 'block';
                restartBtn.style.display = 'block';
                
                // Clear previous lyrics
                lyricsContainer.innerHTML = '';
                
                // Animate Project In
                gsap.fromTo(projectSection, {opacity: 0}, {duration: 1, opacity: 1});
                
                // Start Lyrics Typing
                setTimeout(startLyricsTyping, 1000);

            } else if (type === 'birthday') {
                lyricsContainer.style.display = 'none';
                restartBtn.style.display = 'none';
                birthdayMsg.style.display = 'block';
                
                // Create sparkles
                createSparkles();

                // Animate Project In
                gsap.fromTo(projectSection, {opacity: 0}, {duration: 1, opacity: 1});
                
                gsap.from("#birthday-msg", {
                    duration: 1.5,
                    scale: 0.5,
                    opacity: 0,
                    rotation: -5,
                    ease: "elastic.out(1, 0.3)",
                    delay: 0.5
                });
            }

            // Animate Gallery In
            gsap.from(".gallery-item", {
                duration: 1,
                y: 50,
                opacity: 0,
                stagger: 0.2,
                scrollTrigger: {
                    trigger: ".gallery-section",
                    start: "top 80%"
                }
            });
        }

        function closeProject() {
            // Stop Audio
            bgAudio.pause();
            bgAudio.currentTime = 0;
            isAudioPlaying = false;

            // Kill Animations
            if(typingTimeline) typingTimeline.kill();

            // Transition Project Out
            gsap.to(projectSection, {
                duration: 0.5,
                opacity: 0,
                onComplete: () => {
                    projectSection.style.display = 'none';
                    homeSection.style.display = 'flex';
                    
                    // Reset Video to Default
                    bgVideo.src = "/mylivewallpapers-com-Couple-with-Sparklers-4K.mp4";
                    
                    // Animate Home In
                    gsap.to(".card", {
                        duration: 1,
                        scale: 1,
                        opacity: 1,
                        y: 0,
                        stagger: 0.2,
                        ease: "power3.out"
                    });
                }
            });
        }

        // --- LYRICS ANIMATION ---
        function startLyricsTyping() {
            lyricsContainer.innerHTML = '';
            typingTimeline = gsap.timeline();

            lyrics.forEach((line, index) => {
                const lineSpan = document.createElement('span');
                lineSpan.innerText = line;
                lineSpan.className = 'lyric-line';
                lyricsContainer.appendChild(lineSpan);

                // Typewriter/Fade effect
                typingTimeline.to(lineSpan, {
                    duration: 2, // Time to read line
                    opacity: 1,
                    y: 0,
                    ease: "power2.out",
                    // Use text plugin simulation or just fade in
                });
                
                // Add a small pause between lines
                typingTimeline.to({}, {duration: 0.5});
            });
        }

        function restartLyrics() {
            if(typingTimeline) typingTimeline.kill();
            bgAudio.currentTime = 0;
            bgAudio.play();
            isAudioPlaying = true;
            audioBtn.innerText = "Pause Music";
            startLyricsTyping();
        }

        // --- AUDIO CONTROLS ---
        function toggleAudio() {
            if (isAudioPlaying) {
                bgAudio.pause();
                audioBtn.innerText = "Play Music";
            } else {
                bgAudio.play();
                audioBtn.innerText = "Pause Music";
            }
            isAudioPlaying = !isAudioPlaying;
        }

        // --- BIRTHDAY SPARKLES ---
        function createSparkles() {
            const container = document.querySelector('.project-hero');
            // Clean up old sparkles if any (simple check)
            const oldSparkles = document.querySelectorAll('.sparkle');
            oldSparkles.forEach(s => s.remove());

            for (let i = 0; i < 30; i++) {
                const sparkle = document.createElement('div');
                sparkle.classList.add('sparkle');
                sparkle.style.width = Math.random() * 5 + 2 + 'px';
                sparkle.style.height = sparkle.style.width;
                sparkle.style.top = Math.random() * 100 + '%';
                sparkle.style.left = Math.random() * 100 + '%';
                sparkle.style.animationDelay = Math.random() * 2 + 's';
                container.appendChild(sparkle);
            }
        }

    </script>
</body>
</html>